---
bg: "Diary.jpg"
layout: post
title:  "그림 맞추기 게임 개발기 - 2"
crawlertitle: "그림 맞추기 게임 개발기 - 2"
summary: "그림 맞추기 게임(오늘 뭐 없나..?) - 2"
date: 2021-01-28 22:30:00 +0900
category: Diary
author: Err0rCode7
---

# 재작성 예정에 있습니다.

# 아래 수정 필요

하나씩 나아가기 위해 큰 기능을 단위로 나누어보기로 했고 가장 메인 기능인 `게임 페이지` 기능의 시퀀스를 만들기로 결정하는 것으로 내용을 만들기 시작했습니다.

시퀀스를 만드는 회의 전에 개인적으로 어떤 시퀀스로 동작을 해야할지 정리를 해보기로 하였고 나는 아래와 같이 정리를 해보았다.

멘토님의 조언을 받기 이전까지 만들었던 시퀀스는 큰 내용들은 정리가 되었지만 추상적인 느낌이 컸습니다. 시퀀스 다이어그램으로 작성하지 않고 글로 순차 나열을 했었는데, 여러 갈래로 뻗어나가는 시퀀스를 표현하는 것과 비동기적인 것을 표현하는 것이 어려웠습니다. 또한 회의를 진행할 때 가시적으로 보이지 않아 서로 얘기하는 것이 헷갈리게 되는 상황도 있었습니다.


**처음 작성한 시퀀스 내용 일부**

```md
## 게임 로직
---
채팅에 포함되어야 하는 내용이지만 분리해서 정리를 진행
- `Q1`. 정답을 입력하고 확인하는 내용은 모두 소켓으로 양방향 통신이 이루어진다. 그렇다면 턴 종료, 다음 라운드 시작, 모든 라운드 종료에 대한 통신을 어떤 것으로 해야 할지에 대한 문제가 생긴다.

방에 입장하고나서 방장이 `게임 시작` 버튼을 통해 게임을 시작한다.
(유저들에게 준비 버튼이 없다고 가정)

1. 클라이언트(방장)의 `게임 시작` 버튼 클릭을 통해 서버에게 게임 시작을 요청한다.

2. 서버는 모든 클라이언트에게 `게임 시작`을 알린다.

3. 방장 이외의 모든 유저의 그림 공유(소켓) 요청을 막는다.

4. 또한 서버에서 클라이언트(방장)에게 단어를 제공한다.

	- 여러 단어 선택시 다음을 추가하여 진행한다.

		1. 클라이언트(방장)에게 n개의 단어를 제공한다.

		2. 클라이언트(방장)의 웹 화면에서 단어의 버튼을 나타낸다.

		3. 클라이언트(방장)이 버튼을 클릭하여 서버에 단어 선택을 요청한다.

5. 서버는 모든 클라이언트들에게 카운트다운 시작을 알린다.

6. 정해진 시간이 종료가 되면 서버에 턴 종료를 요청한다.

7. 6번의 요청이 왔거나, 서버에서 방장이외의 모든 클라이언트가 채팅으로 정답을 맞췄다면 턴 종료를 모든 클라이언트에게 알린다.

	- `Q1`. 이 내용은 백 엔드에서 처리하는 방법이다. 프론트 엔드에서 처리하는 것이 더 좋은 것인지 모른다.

	- 예외. 라운드 종료 처리

		1. 하나의 라운드가 종료되었으면 새로운 라운드의 시작의 내용으로 정보를 채운다.
			ex)
			```json
			{
				턴 관련 데이터 ...,
				"curRound": 2,
				"isLastRound": false,
				"isNewRound": True,
			}
			```
		- 예외. 모든 라운드 종료

			1. 클라이언트에게 모든 라운드 종료 내용의 데이터를 보내서 알린다.
			```json
			{
				턴 관련 데이터 ...,
				"curRound": 2,
				"isLastRound": True,
				"newRound": True
			}
			```

			2. 클라이언트는 내용을 받으면 웹 화면은 처음 게임 대기 화면이 된다.

		2. 다음 라운드의 시작으로 정보를 보낸다.

8. 턴에 대한 모든 내용을 초기화한다.

- **발생하는 문제**
	- `Q1`
		- 논의하여 결정해야할 문제이다.
		- 정답이 맞고 틀리고에 대한 내용은 소켓을 통해서 통신이 가능하다.
		- 게임 시작, 다음 턴과 다음 라운드, 게임 종료는 어떤 방식으로 해야할까 ?
	- `Q2`
		- 백 엔드에서 처리를 하게된다면 프론트 엔드에서는 받은 내용을 그대로 웹 화면에 보여주면된다.
		- 프론트 엔드에서 처리할 경우 자바스크립트 코드로 노출이 될 수 있다. 그렇다면 이것을 해결할 수 있을까? -> 이 부분이 어쩔 수 없는 부분인지 모르겠다.
```

당연히 내용이 더 보완되어야 한다고 생각했고 어떤 방법이 좋을 까를 생각했습니다. 이호준 멘토님이 조언해준 내용이 잘 담겨있는  [이인평 인턴님이 작성한 블로그 글](https://42place.innovationacademy.kr/archives/790)을 참고해보기로 했습니다.

저희 팀은 서비스의 내용은 정했기 때문에 곧바로 시퀀스 다이어그램을 작성하기 시작했습니다. 다이어그램의 형태로 내용을 작성하는 것은 번거로웠지만 굉장히 가시성이 좋았습니다. 모두가 순서를 보다 정확히 한 눈에 알아볼 수 있었고 어떤 내용이 빠졌는 지 알아보기 좋았습니다. 



## 마무리
---

혼자서 생각나는 대로 시퀀스를 짜기는 했는데 뭔가 놓치고 있는 기분이 든다. 구체적으로 한다고 했는데 많이 부족한 점도 있는 것 같고 혼자서 결정할 수 있는 내용이 아니다 보니 생각이 드는 대로 주저리주저리 적은 것 같다. 뭐를 놓치고 있는지 내일 있는 42서울 개인 멘토링에서 멘토님에게 상담을 받아 보고 그 내용을 바탕으로 팀원들과 시퀀스 작성에 대한 회의를 진행하는 것이 좋을 것 같다.

### 여기부턴 이전 내용

어제 오전에 42서울 이호준 멘토님에게 개인 상담과 프로젝트 상담을 받았다. 프로젝트 관련해서 물어본 내용은 진행 방식에 대한 것이였다.

질문 중 하나는 다음 회의에서 기능 시퀀스를 정해야 하는 데 어떤 방식이 좋은 지에 대한 것이였다.

멘토님은 프로젝트에서 중요한 것과 시퀀스 작성의 방향을 설명해주셨는데 프로젝트는 대부분이 문서 작업이고 나중에 서로 다르게 의사소통이 되지 않도록 모두 기록을 잘 하라는 것이였다. 그리고 시퀀스 작성의 방향에 대해서는 모두가 시퀀스에 대한 내용을 모두 똑같이 알 수 있도록 마이크로 단위로 상세히 하라는 것이였다.

이 내용을 듣고 나는 지난 프로젝트 캡슐 타임을 떠올렸다. 그 당시에 나는 팀원들과 열심히 기능의 시퀀스를 열심히 회의를 했었다. 이후에 개발에 들어가게 되었었는데 혼란이 생겼다. 이유는 시퀀스 회의 당시에 같이 이해한 내용이 모두 달랐던 것이였다. 그래서 이전 회의 기록을 찾아보았었는데, 우리 팀이 회의 하고 기록한 내용들은 더 큰 그림이였고 디테일한 내용은 의논하지 않았었다.

과거의 경험을 바탕으로 멘토님의 답변을 더 크게 이해할 수 있었다.

나는 이 내용을 회의를 시작하자마자 모두에게 얘기를 했고 우리 팀은 아주 상세히 기록하는 방향으로 시퀀스를 작성하기 시작했다.

하지만 문제가 있었는데, 상세히 기록해야하는 것은 알겠는데 그렇다면 어떻게 해야하는 것일까? 라는 질문이 문제였다.

<p align="center">
<img src="https://user-images.githubusercontent.com/48249549/106136408-9d85e880-61ac-11eb-90c9-5e2fd076abab.png">
</p>

처음에는 액셀로 글로 적으면서 진행을 했다. 메인 기능에서부터 메인 기능이 어떤 것으로 나뉘고 이런식으로 진행을 했는 데, 얼마지나지 않아서 머리가 아파오기 시작했다. 그리고 이렇게 해서는 상세히 적는 것이 어려울 것 같았다.

얘기를 계속하다가 멘토님이 담당하셨던 한 인턴분의 블로그 글에서 내용처럼 시퀀스 다이어그램이란 것을 그려보기로 했다.

<p align="center">
<img src="https://user-images.githubusercontent.com/48249549/106136564-d3c36800-61ac-11eb-99d6-a7bf73310b28.png">
</p>

처음엔 일단 그려보았는데 어디서 어떻게 뻗어나가고 해야하는 지, 어떤 걸 결정해야하는 지 혼란스러웠다. 하지만 명확하게 상세한 내용을 순서대로 기록할 수 있었다. 이 방법이라면 마이크로 단위로 적을 수 있겠다 싶었다. 하지만 작성하는 것이 시간이 걸리고 어려웠는데, 우리는 쉽게 생각할 수 있는 시퀀스부터 먼저 작성해보았고 천천히 감을 잡기 시작했다. 그렇게 아주 세밀하게 나눈 하나의 기능 시퀀스 다이어그램을 작성하였고 이어서 다음 회의 때 다른 시퀀스들도 마무리를 하기로 하고 회의를 마치었다.

무의식적으로 나는 프로젝트에서 중요한 것은 개발을 하는 것이라고 생각했다. 그 이유는 공부하는 것이 개발에 관한 언어와 기술들이라서였다. 하지만 어제의 멘토링과 현재 프로젝트를 진행하다보니 프로젝트에서 중요한 것은 협업이었다. 설계 단계에서 세밀하지 못하거나 팀원 모두가 다른 내용으로 인지하고 있다면 결과물은 오류 덩어리일지 모른다. 또는 요구사항대로 동작을 안할 수도 있다. 그렇기 때문에 꼭 상세히 기록을 남겨야한다.

많은 것을 깨닫게된 하루였다.
